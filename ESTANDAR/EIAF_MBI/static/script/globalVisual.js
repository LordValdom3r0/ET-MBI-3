var color = "empty";
var box_array = {}
var box_puntos = {}
var fuses_BB = {
    'PDC-D': {
        'F200': [[271, 573], [301, 584]], 'F201': [[271, 556], [301, 567]], 'F202': [[271, 539], [301, 550]], 'F203': [[271, 522], [301, 533]], 
        'F204': [[271, 504], [301, 516]], 'F205': [[271, 487], [301, 498]], 'F206': [[271, 470], [301, 481]], 'F207': [[271, 453], [301, 464]], 
        'F208': [[271, 436], [301, 447]], 'F209': [[367, 573], [417, 584]], 'F210': [[367, 556], [417, 568]], 'F211': [[367, 539], [417, 551]], 
        'F212': [[367, 522], [417, 534]], 'F213': [[367, 505], [417, 517]], 'F214': [[367, 487], [417, 499]], 'F215': [[367, 469], [417, 481]], 
        'F216': [[367, 452], [417, 464]], 'F217': [[291, 402], [319, 414]], 'F218': [[291, 385], [319, 396]], 'F219': [[291, 367], [319, 379]], 
        'F220': [[291, 350], [319, 361]], 'F221': [[291, 333], [319, 344]], 'F222': [[329, 402], [356, 414]], 'F223': [[329, 385], [356, 396]], 
        'F224': [[329, 367], [356, 379]], 'F225': [[329, 350], [356, 361]], 'F226': [[329, 333], [356, 344]], 'F227': [[375, 419], [406, 430]], 
        'F228': [[375, 402], [406, 414]], 'F229': [[375, 385], [406, 396]], 'F230': [[375, 367], [406, 379]], 'F231': [[375, 350], [406, 361]], 
        'F232': [[375, 333], [406, 344]]
    }, 
    'PDC-P': {
        'MF1': [[279, 276], [369, 288]],   'MF2': [[279, 295], [369, 307]], 'F300': [[282, 395], [326, 408]], 'F301': [[289, 380], [315, 390]], 
        'F302': [[289, 365], [314, 375]], 'F303': [[292, 350], [314, 361]], 'F304': [[291, 335], [315, 347]], 'F305': [[292, 322], [314, 331]], 
        'F318': [[341, 428], [365, 437]], 'F319': [[342, 415], [366, 423]], 'F320': [[343, 400], [365, 408]], 'F321': [[342, 384], [367, 393]], 
        'F322': [[344, 368], [366, 379]], 'F323': [[342, 354], [366, 364]], 'F324': [[344, 340], [366, 348]], 'F325': [[343, 326], [368, 335]], 
        'F326': [[378, 427], [422, 438]], 'F327': [[379, 413], [422, 425]], 'F328': [[379, 398], [423, 409]], 'F329': [[380, 384], [424, 395]], 
        'F330': [[380, 369], [422, 380]], 'F331': [[380, 354], [422, 364]], 'F332': [[381, 339], [422, 349]], 'F333': [[380, 324], [422, 335]], 
        'F334': [[380, 309], [422, 319]], 'F335': [[380, 294], [422, 307]], 'E21': [[287, 423], [295, 441]], 'E22': [[295, 442], [302, 460]]
    }, 
    'PDC-R': {           
        'F400': [[510, 214], [519, 246]], 'F401': [[499, 214], [508, 246]], 'F402': [[487, 214], [497, 246]], 'F403': [[477, 214], [485, 246]], 
        'F404': [[467, 214], [475, 246]], 'F405': [[455, 214], [464, 246]], 'F411': [[385, 220], [392, 241]], 'F410': [[395, 220], [402, 241]], 
        'F409': [[403, 220], [412, 241]], 'F408': [[414, 220], [421, 241]], 'F407': [[423, 220], [432, 241]], 'F406': [[434, 220], [443, 241]], 
        'F412': [[527, 222], [558, 231]], 'F413': [[527, 211], [558, 220]], 'F414': [[527, 204], [558, 213]], 'F415': [[527, 193], [558, 202]], 
        'F416': [[527, 182], [558, 191]], 'F417': [[527, 171], [558, 180]], 'F420': [[326, 171], [374, 186]], 'F419': [[326, 195], [374, 210]], 
        'F418': [[326, 217], [374, 232]], 'F421': [[527, 144], [558, 153]], 'F422': [[527, 133], [558, 142]], 'F423': [[527, 122], [558, 131]], 
        'F424': [[527, 111], [558, 120]], 'F425': [[527, 102], [558, 111]], 'F426': [[527, 91],  [558, 100]], 'F427': [[495, 133], [504, 153]], 
        'F428': [[485, 133], [494, 153]], 'F429': [[475, 133], [484, 153]], 'F430': [[465, 133], [474, 153]], 'F431': [[453, 133], [462, 153]], 
        'F437': [[496, 111], [505, 130]], 'F438': [[487, 111], [495, 130]], 'F439': [[476, 111], [485, 130]], 'F440': [[465, 111], [474, 130]], 
        'F441': [[455, 111], [464, 130]], 'F432': [[432, 133], [441, 153]], 'F433': [[421, 133], [430, 153]], 'F434': [[410, 133], [419, 153]], 
        'F435': [[399, 133], [408, 153]], 'F436': [[388, 133], [397, 153]], 'F442': [[431, 111], [440, 130]], 'F443': [[420, 111], [429, 130]], 
        'F444': [[410, 111], [419, 129]], 'F445': [[399, 111], [408, 130]], 'F446': [[389, 111], [398, 130]], 'F449': [[326, 88],  [374, 104]], 
        'F448': [[326, 112], [374, 128]], 'F447': [[326, 137], [374, 153]], 'F450': [[512, 72],  [521, 103]], 'F451': [[501, 72],  [510, 103]], 
        'F452': [[490, 72],  [499, 103]], 'F453': [[479, 72],  [488, 103]], 'F454': [[469, 72],  [478, 103]], 'F455': [[458, 72],  [467, 103]], 
        'F456': [[435, 72],  [444, 103]], 'F457': [[424, 72],  [433, 103]], 'F458': [[413, 72],  [422, 103]], 'F459': [[402, 72],  [411, 103]], 
        'F460': [[391, 72],  [400, 103]], 'F461': [[380, 72],  [389, 103]], 'F462': [[240, 166], [256, 215]], 'F463': [[215, 166], [231, 215]], 
        'F464': [[191, 166], [207, 215]], 'F465': [[277, 107], [297, 115]], 'F466': [[277, 97],  [297, 105]], 'F467': [[277, 86],  [297, 94]], 
        'F468': [[277, 75],  [297, 83]],  'F469': [[277, 64],  [297, 72]],  'F470': [[277, 53],  [297, 61]],  'F471': [[231, 107], [264, 115]], 
        'F472': [[231, 97],  [264, 105]], 'F473': [[231, 86],  [264, 94]],  'F474': [[231, 75],  [264, 83]],  'F475': [[231, 64],  [264, 72]], 
        'F476': [[231, 53],  [264, 61]],  'F477': [[187, 107], [220, 115]], 'F478': [[187, 97],  [220, 105]], 'F479': [[187, 86],  [220, 94]], 
        'F480': [[187, 75],  [220, 83]],  'F481': [[187, 64],  [220, 71]],  'F482': [[187, 53],  [220, 61]],  'RELX': [[478, 162], [525, 206]], 
        'RELU': [[427, 162], [476, 206]], 'RELT': [[378, 162], [425, 206]]
    },                                                 
    'PDC-RMID': {
        'F400': [[613, 350], [627, 388]], 'F401': [[601, 350], [612, 388]], 'F402': [[587, 350], [599, 388]], 'F403': [[577, 350], [588, 388]], 
        'F404': [[565, 350], [576, 388]], 'F405': [[553, 350], [564, 388]], 'F411': [[463, 357], [474, 378]], 'F410': [[475, 357], [486, 378]], 
        'F409': [[487, 357], [496, 378]], 'F408': [[497, 357], [510, 378]], 'F407': [[512, 357], [523, 378]], 'F406': [[525, 357], [534, 378]], 
        'F412': [[633, 360], [673, 371]], 'F413': [[633, 348], [673, 359]], 'F414': [[633, 335], [673, 346]], 'F415': [[633, 323], [673, 334]], 
        'F416': [[633, 311], [673, 322]], 'F417': [[633, 297], [673, 308]], 'F420': [[398, 300], [455, 318]], 'F419': [[398, 330], [455, 348]], 
        'F418': [[398, 358], [455, 376]], 'F421': [[634, 272], [671, 284]], 'F422': [[634, 256], [671, 269]], 'F423': [[634, 244], [671, 255]], 
        'F424': [[634, 229], [671, 241]], 'F425': [[634, 217], [671, 228]], 'F426': [[634, 204], [671, 216]], 'F427': [[597, 256], [607, 280]], 
        'F428': [[585, 256], [595, 280]], 'F429': [[573, 256], [583, 280]], 'F430': [[561, 256], [571, 280]], 'F431': [[547, 256], [557, 280]], 
        'F437': [[600, 228], [610, 252]], 'F438': [[587, 228], [597, 252]], 'F439': [[575, 228], [585, 252]], 'F440': [[563, 228], [573, 252]], 
        'F441': [[550, 228], [560, 252]], 'F432': [[520, 256], [530, 280]], 'F433': [[508, 256], [518, 280]], 'F434': [[496, 256], [506, 280]], 
        'F435': [[484, 256], [494, 280]], 'F436': [[472, 256], [482, 280]], 'F442': [[518, 228], [528, 252]], 'F443': [[506, 228], [516, 252]], 
        'F444': [[494, 228], [504, 252]], 'F445': [[481, 228], [491, 252]], 'F446': [[469, 228], [479, 252]], 'F450': [[616, 180], [628, 218]], 
        'F451': [[604, 180], [615, 218]], 'F452': [[592, 180], [602, 218]], 'F453': [[577, 180], [589, 218]], 'F454': [[564, 180], [576, 218]], 
        'F455': [[553, 180], [563, 218]], 'F456': [[525, 180], [535, 218]], 'F457': [[514, 180], [524, 218]], 'F458': [[500, 180], [513, 218]], 
        'F459': [[487, 180], [497, 218]], 'F460': [[473, 180], [486, 218]], 'F461': [[463, 180], [474, 218]], 'RELX': [[578, 291], [629, 348]], 
        'RELU': [[517, 291], [573, 348]], 'RELT': [[461, 291], [512, 348]], 'F449': [[398, 206], [455, 224]], 'F448': [[398, 232], [455, 250]], 
        'F447': [[398, 260], [455, 278]]
    },
    'PDC-RS': {
        'F400': [[613, 350], [627, 388]], 'F401': [[601, 350], [612, 388]], 'F402': [[587, 350], [599, 388]], 'F403': [[577, 350], [588, 388]], 
        'F404': [[565, 350], [576, 388]], 'F405': [[553, 350], [564, 388]], 'F411': [[463, 357], [474, 378]], 'F410': [[475, 357], [486, 378]], 
        'F409': [[487, 357], [496, 378]], 'F408': [[497, 357], [510, 378]], 'F407': [[512, 357], [523, 378]], 'F406': [[525, 357], [534, 378]], 
        'F412': [[633, 360], [673, 371]], 'F413': [[633, 348], [673, 359]], 'F414': [[633, 335], [673, 346]], 'F415': [[633, 323], [673, 334]], 
        'F416': [[633, 311], [673, 322]], 'F417': [[633, 297], [673, 308]], 'F420': [[398, 300], [455, 318]], 'F419': [[398, 330], [455, 348]], 
        'F418': [[398, 358], [455, 376]], 'F421': [[634, 272], [671, 284]], 'F422': [[634, 256], [671, 269]], 'F423': [[634, 244], [671, 255]], 
        'F424': [[634, 229], [671, 241]], 'F425': [[634, 217], [671, 228]], 'F426': [[634, 204], [671, 216]], 'F427': [[597, 256], [607, 280]], 
        'F428': [[585, 256], [595, 280]], 'F429': [[573, 256], [583, 280]], 'F430': [[561, 256], [571, 280]], 'F431': [[547, 256], [557, 280]], 
        'F437': [[600, 228], [610, 252]], 'F438': [[587, 228], [597, 252]], 'F439': [[575, 228], [585, 252]], 'F440': [[563, 228], [573, 252]], 
        'F441': [[550, 228], [560, 252]], 'F432': [[520, 256], [530, 280]], 'F433': [[508, 256], [518, 280]], 'F434': [[496, 256], [506, 280]], 
        'F435': [[484, 256], [494, 280]], 'F436': [[472, 256], [482, 280]], 'F442': [[518, 228], [528, 252]], 'F443': [[506, 228], [516, 252]], 
        'F444': [[494, 228], [504, 252]], 'F445': [[481, 228], [491, 252]], 'F446': [[469, 228], [479, 252]], 'F450': [[616, 180], [628, 218]], 
        'F451': [[604, 180], [615, 218]], 'F452': [[592, 180], [602, 218]], 'F453': [[577, 180], [589, 218]], 'F454': [[564, 180], [576, 218]], 
        'F455': [[553, 180], [563, 218]], 'F456': [[525, 180], [535, 218]], 'F457': [[514, 180], [524, 218]], 'F458': [[500, 180], [513, 218]], 
        'F459': [[487, 180], [497, 218]], 'F460': [[473, 180], [486, 218]], 'F461': [[463, 180], [474, 218]], 'RELX': [[578, 291], [629, 348]], 
        'RELU': [[517, 291], [573, 348]], 'RELT': [[461, 291], [512, 348]], 'F449': [[398, 206], [455, 224]], 'F448': [[398, 232], [455, 250]], 
        'F447': [[398, 260], [455, 278]]
    },
    'F96': {
        'F96': [[257, 346], [480, 417]]
    },
    'PDC-S': {
        '1': [[439, 218], [486, 392]], '2': [[494, 218], [540, 392]], '3': [[550, 218], [596, 392]], '4': [[607, 219], [653, 392]], 
        '5': [[661, 218], [711, 392]], '6': [[719, 218], [763, 392]]
    }, 
    'TBLU': {
        '9': [[81, 531], [118, 600]], '8': [[124, 531], [161, 600]], '7': [[169, 531], [206, 600]], '6': [[213, 531], [250, 600]], 
        '5': [[258, 531], [296, 600]], '4': [[303, 531], [341, 600]], '3': [[347, 531], [385, 600]], '2': [[392, 531], [429, 600]], 
        '1': [[435, 531], [472, 600]]
    },
    'PDC-E': {
        // 'A1-2': [[284, 349], [295, 359]],'A1-3': [[283, 366], [295, 375]],'A2-1': [[511, 333], [530, 340]],'A2-2': [[568, 340], [576, 349]],'A2-5': [[566, 373], [580, 385]],
        'F100': [[282, 187], [294, 226]],'F101': [[297, 187], [308, 226]],'F102': [[309, 187], [321, 226]],'F103': [[322, 187], [333, 226]],'F104': [[334, 187], [347, 226]],
        'F105': [[350, 187], [360, 226]],'F106': [[388, 187], [401, 226]],'F107': [[401, 187], [412, 226]],'F108': [[414, 187], [426, 226]],'F109': [[429, 187], [439, 226]],
        'F110': [[442, 187], [451, 226]],'F111': [[454, 187], [467, 226]],'F112': [[495, 187], [506, 226]],'F113': [[509, 187], [519, 226]],'F114': [[522, 187], [533, 226]],
        'F115': [[535, 187], [547, 226]],'F116': [[548, 187], [558, 226]],'F117': [[561, 187], [572, 226]],'F118': [[252, 222], [274, 230]],'F119': [[252, 234], [274, 242]],
        'F120': [[252, 248], [274, 255]],'F121': [[252, 261], [274, 270]],'F122': [[252, 274], [274, 284]],'F123': [[252, 288], [274, 297]],'F124': [[586, 215], [610, 225]],
        'F127': [[586, 254], [610, 264]],'F128': [[586, 268], [610, 277]],'F129': [[586, 281], [610, 291]],'F136': [[443, 246], [466, 306]],'F139': [[533, 286], [541, 309]],
        'F140': [[545, 286], [555, 309]],'F141': [[559, 286], [567, 309]],'F142': [[572, 286], [580, 309]],'RELN': [[327, 235], [380, 291]],'RELR': [[385, 236], [440, 289]]
    },
    'PDC-E_AMG': {
        // 'A1-2': [[284, 349], [295, 359]],'A1-3': [[283, 366], [295, 375]],'A2-1': [[511, 333], [530, 340]],'A2-2': [[568, 340], [576, 349]],'A2-5': [[566, 373], [580, 385]],
        'F100': [[282, 187], [294, 226]],'F101': [[297, 187], [308, 226]],'F102': [[309, 187], [321, 226]],'F103': [[322, 187], [333, 226]],'F104': [[334, 187], [347, 226]],
        'F105': [[350, 187], [360, 226]],'F106': [[388, 187], [401, 226]],'F107': [[401, 187], [412, 226]],'F108': [[414, 187], [426, 226]],'F109': [[429, 187], [439, 226]],
        'F110': [[442, 187], [451, 226]],'F111': [[454, 187], [467, 226]],'F112': [[495, 187], [506, 226]],'F113': [[509, 187], [519, 226]],'F114': [[522, 187], [533, 226]],
        'F115': [[535, 187], [547, 226]],'F116': [[548, 187], [558, 226]],'F117': [[561, 187], [572, 226]],'F118': [[252, 222], [274, 230]],'F119': [[252, 234], [274, 242]],
        'F120': [[252, 248], [274, 255]],'F121': [[252, 261], [274, 270]],'F122': [[252, 274], [274, 284]],'F123': [[252, 288], [274, 297]],'F124': [[586, 215], [610, 225]],
        'F127': [[586, 254], [610, 264]],'F128': [[586, 268], [610, 277]],'F129': [[586, 281], [610, 291]],'F136': [[443, 246], [466, 306]],'F139': [[533, 286], [541, 309]],
        'F140': [[545, 286], [555, 309]],'F141': [[559, 286], [567, 309]],'F142': [[572, 286], [580, 309]],'F143': [[258, 354], [270, 390]],'F144': [[280, 349], [292, 385]],
        'F145': [[293, 349], [305, 385]],'F146': [[485, 320], [506, 382]],'F147': [[322, 352], [334, 388]],'RELI': [[425, 322], [483, 380]],'RELN': [[327, 235], [380, 291]],
        'RELQ': [[515, 328], [570, 386]],'RELR': [[385, 236], [440, 289]]
    },
    'PDC-S1': {
        'F200': [[271, 573], [301, 584]], 'F201': [[271, 556], [301, 567]], 'F202': [[271, 539], [301, 550]], 'F203': [[271, 522], [301, 533]], 
        'F204': [[271, 504], [301, 516]], 'F205': [[271, 487], [301, 498]], 'F206': [[271, 470], [301, 481]], 'F207': [[271, 453], [301, 464]], 
        'F208': [[271, 436], [301, 447]], 'F209': [[367, 573], [417, 584]], 'F210': [[367, 556], [417, 568]], 'F211': [[367, 539], [417, 551]], 
        'F212': [[367, 522], [417, 534]], 'F213': [[367, 505], [417, 517]], 'F214': [[367, 487], [417, 499]], 'F215': [[367, 469], [417, 481]], 
        'F216': [[367, 452], [417, 464]], 'F217': [[291, 402], [319, 414]], 'F218': [[291, 385], [319, 396]], 'F219': [[291, 367], [319, 379]], 
        'F220': [[291, 350], [319, 361]], 'F221': [[291, 333], [319, 344]], 'F222': [[329, 402], [356, 414]], 'F223': [[329, 385], [356, 396]], 
        'F224': [[329, 367], [356, 379]], 'F225': [[329, 350], [356, 361]], 'F226': [[329, 333], [356, 344]], 'F227': [[375, 419], [406, 430]], 
        'F228': [[375, 402], [406, 414]], 'F229': [[375, 385], [406, 396]], 'F230': [[375, 367], [406, 379]], 'F231': [[375, 350], [406, 361]], 
        'F232': [[375, 333], [406, 344]]
    }

}


var fuses_value = {
    'PDC-P': {
        'MF1': color, 'MF2': color, 'F300': color, 'F301': color, 'F302': color, 'F303': color, 'F304': color, 'F305': color, 'F318': color, 
        'F319': color, 'F320': color, 'F321': color, 'F322': color, 'F323': color, 'F324': color, 'F325': color, 'F326': color, 'F327': color, 
        'F328': color, 'F329': color, 'F330': color, 'F331': color, 'F332': color, 'F333': color, 'F334': color, 'F335': color, 'E21': color, 
        'E22': color
    },
    'PDC-D': {
        'F200': color, 'F201': color, 'F202': color, 'F203': color, 'F204': color, 'F205': color, 'F206': color, 'F207': color, 'F208': color, 
        'F209': color, 'F210': color, 'F211': color, 'F212': color, 'F213': color, 'F214': color, 'F215': color, 'F216': color, 'F217': color, 
        'F218': color, 'F219': color, 'F220': color, 'F221': color, 'F222': color, 'F223': color, 'F224': color, 'F225': color, 'F226': color, 
        'F227': color, 'F228': color, 'F229': color, 'F230': color, 'F231': color, 'F232': color
    },
    'PDC-R': {
        'F400': color, 'F401': color, 'F402': color, 'F403': color, 'F404': color, 'F405': color, 'F411': color, 'F410': color, 'F409': color, 
        'F408': color, 'F407': color, 'F406': color, 'F412': color, 'F413': color, 'F414': color, 'F415': color, 'F416': color, 'F417': color, 
        'F420': color, 'F419': color, 'F418': color, 'F421': color, 'F422': color, 'F423': color, 'F424': color, 'F425': color, 'F426': color, 
        'F427': color, 'F428': color, 'F429': color, 'F430': color, 'F431': color, 'F437': color, 'F438': color, 'F439': color, 'F440': color, 
        'F441': color, 'F432': color, 'F433': color, 'F434': color, 'F435': color, 'F436': color, 'F442': color, 'F443': color, 'F444': color, 
        'F445': color, 'F446': color, 'F449': color, 'F448': color, 'F447': color, 'F450': color, 'F451': color, 'F452': color, 'F453': color, 
        'F454': color, 'F455': color, 'F456': color, 'F457': color, 'F458': color, 'F459': color, 'F460': color, 'F461': color, 'F462': color, 
        'F463': color, 'F464': color, 'F465': color, 'F466': color, 'F467': color, 'F468': color, 'F469': color, 'F470': color, 'F471': color, 
        'F472': color, 'F473': color, 'F474': color, 'F475': color, 'F476': color, 'F477': color, 'F478': color, 'F479': color, 'F480': color, 
        'F481': color, 'F482': color, 'RELX': color, 'RELU': color, 'RELT': color, 'F96': color
    },
    'PDC-RMID': {
        'F400': color, 'F401': color, 'F402': color, 'F403': color, 
        'F404': color, 'F405': color, 'F411': color, 'F410': color, 
        'F409': color, 'F408': color, 'F407': color, 'F406': color, 
        'F412': color, 'F413': color, 'F414': color, 'F415': color, 
        'F416': color, 'F417': color, 'F420': color, 'F419': color, 
        'F418': color, 'F421': color, 'F422': color, 'F423': color, 
        'F424': color, 'F425': color, 'F426': color, 'F427': color, 
        'F428': color, 'F429': color, 'F430': color, 'F431': color, 
        'F437': color, 'F438': color, 'F439': color, 'F440': color, 
        'F441': color, 'F432': color, 'F433': color, 'F434': color, 
        'F435': color, 'F436': color, 'F442': color, 'F443': color, 
        'F444': color, 'F445': color, 'F446': color, 'F450': color, 
        'F451': color, 'F452': color, 'F453': color, 'F454': color, 
        'F455': color, 'F456': color, 'F457': color, 'F458': color, 
        'F459': color, 'F460': color, 'F461': color, 'RELX': color, 
        'RELU': color, 'RELT': color, 'F449': color, 'F448': color, 
        'F447': color
    },
    'PDC-RS': {
        'F400': color, 'F401': color, 'F402': color, 'F403': color, 'F404': color, 'F405': color, 'F411': color, 'F410': color, 'F409': color, 
        'F408': color, 'F407': color, 'F406': color, 'F412': color, 'F413': color, 'F414': color, 'F415': color, 'F416': color, 'F417': color, 
        'F420': color, 'F419': color, 'F418': color, 'F421': color, 'F422': color, 'F423': color, 'F424': color, 'F425': color, 'F426': color, 
        'F427': color, 'F428': color, 'F429': color, 'F430': color, 'F431': color, 'F437': color, 'F438': color, 'F439': color, 'F440': color, 
        'F441': color, 'F432': color, 'F433': color, 'F434': color, 'F435': color, 'F436': color, 'F442': color, 'F443': color, 'F444': color, 
        'F445': color, 'F446': color, 'F450': color, 'F451': color, 'F452': color, 'F453': color, 'F454': color, 'F455': color, 'F456': color, 
        'F457': color, 'F458': color, 'F459': color, 'F460': color, 'F461': color, 'RELX': color, 'RELU': color, 'RELT': color, 'F449': color, 
        'F448': color, 'F447': color, 'F96': color
    },
    'F96': {
        'F96': color
    },
    'PDC-S': {
        '1': color, '2': color, '3': color, '4': color, '5': color, '6': color
    }, 
    'TBLU': {
        '9': color, '8': color, '7': color, '6': color, '5': color, '4': color, '3': color, '2': color, '1': color
    },
    'PDC-E': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': color,'F101': color,'F102': color,'F103': color,'F104': color,
        'F105': color,'F106': color,'F107': color,'F108': color,'F109': color,'F110': color,'F111': color,'F112': color,'F113': color,'F114': color,
        'F115': color,'F116': color,'F117': color,'F118': color,'F119': color,'F120': color,'F121': color,'F122': color,'F123': color,'F124': color,
        'F125': color,'F126': color,'F127': color,'F128': color,'F129': color,'F130': color,'F131': color,'F132': color,'F133': color,'F134': color,
        'F135': color,'F136': color,'F137': color,'F138': color,'F139': color,'F140': color,'F141': color,'F142': color,'RELN': color,'RELR': color
    },
    'PDC-E_AMG': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': color,'F101': color,'F102': color,'F103': color,'F104': color,
        'F105': color,'F106': color,'F107': color,'F108': color,'F109': color,'F110': color,'F111': color,'F112': color,'F113': color,'F114': color,
        'F115': color,'F116': color,'F117': color,'F118': color,'F119': color,'F120': color,'F121': color,'F122': color,'F123': color,'F124': color,
        'F125': color,'F126': color,'F127': color,'F128': color,'F129': color,'F130': color,'F131': color,'F132': color,'F133': color,'F134': color,
        'F135': color,'F136': color,'F137': color,'F138': color,'F139': color,'F140': color,'F141': color,'F142': color,'F143': color,'F144': color,
        'F145': color,'F146': color,'F147': color,'RELI': color,'RELN': color,'RELQ': color,'RELR': color
    },
    'PDC-S1': {
        'F200': color, 'F201': color, 'F202': color, 'F203': color, 'F204': color, 'F205': color, 'F206': color, 'F207': color, 'F208': color, 
        'F209': color,  'F210': color,  'F211': color, 'F212': color, 'F213': color, 'F214': color, 'F215': color, 'F216': color, 'F217': color, 
        'F218': color, 'F219': color, 'F220': color, 'F221': color, 'F222': color, 'F223': color, 'F224': color, 'F225': color, 'F226': color, 
        'F227': color, 'F228': color, 'F229': color, 'F230': color, 'F231': color, 'F232': color
    }
}

var fuses_format = {
    'PDC-P': {
        'MF1':  0, 'MF2': 0, 'F300': 0, 'F301': 0, 'F302': 0, 'F303': 0, 'F304': 0, 'F305': 0, 'F318': 0, 
        'F319': 0, 'F320': 0, 'F321': 0, 'F322': 0, 'F323': 0, 'F324': 0, 'F325': 0, 'F326': 0, 'F327': 0, 
        'F328': 0, 'F329': 0, 'F330': 0, 'F331': 0, 'F332': 0, 'F333': 0, 'F334': 0, 'F335': 0, 'E21': 0, 
        'E22': 0
    },
    'PDC-D': {
        'F200': 0, 'F201': 0, 'F202': 0, 'F203': 0, 'F204': 0, 'F205': 0, 'F206': 0, 'F207': 0, 'F208': 0, 
        'F209': 0, 'F210': 0, 'F211': 0, 'F212': 0, 'F213': 0, 'F214': 0, 'F215': 0, 'F216': 0, 'F217': 0, 
        'F218': 0, 'F219': 0, 'F220': 0, 'F221': 0, 'F222': 0, 'F223': 0, 'F224': 0, 'F225': 0, 'F226': 0, 
        'F227': 0, 'F228': 0, 'F229': 0, 'F230': 0, 'F231': 0, 'F232': 0
    },
    'PDC-R': {
        'F400': 0, 'F401': 0, 'F402': 0, 'F403': 0, 'F404': 0, 'F405': 0, 'F411': 0, 'F410': 0, 'F409': 0, 
        'F408': 0, 'F407': 0, 'F406': 0, 'F412': 0, 'F413': 0, 'F414': 0, 'F415': 0, 'F416': 0, 'F417': 0, 
        'F420': 0, 'F419': 0, 'F418': 0, 'F421': 0, 'F422': 0, 'F423': 0, 'F424': 0, 'F425': 0, 'F426': 0, 
        'F427': 0, 'F428': 0, 'F429': 0, 'F430': 0, 'F431': 0, 'F437': 0, 'F438': 0, 'F439': 0, 'F440': 0, 
        'F441': 0, 'F432': 0, 'F433': 0, 'F434': 0, 'F435': 0, 'F436': 0, 'F442': 0, 'F443': 0, 'F444': 0, 
        'F445': 0, 'F446': 0, 'F449': 0, 'F448': 0, 'F447': 0, 'F450': 0, 'F451': 0, 'F452': 0, 'F453': 0, 
        'F454': 0, 'F455': 0, 'F456': 0, 'F457': 0, 'F458': 0, 'F459': 0, 'F460': 0, 'F461': 0, 'F462': 0, 
        'F463': 0, 'F464': 0, 'F465': 0, 'F466': 0, 'F467': 0, 'F468': 0, 'F469': 0, 'F470': 0, 'F471': 0, 
        'F472': 0, 'F473': 0, 'F474': 0, 'F475': 0, 'F476': 0, 'F477': 0, 'F478': 0, 'F479': 0, 'F480': 0, 
        'F481': 0, 'F482': 0, 'RELX': 0, 'RELU': 0, 'RELT': 0
    },
    'PDC-RMID': {
        'F400': 0, 'F401': 0, 'F402': 0, 'F403': 0, 'F404': 0, 'F405': 0, 'F411': 0, 'F410': 0, 'F409': 0, 
        'F408': 0, 'F407': 0, 'F406': 0, 'F412': 0, 'F413': 0, 'F414': 0, 'F415': 0, 'F416': 0, 'F417': 0, 
        'F420': 0, 'F419': 0, 'F418': 0, 'F421': 0, 'F422': 0, 'F423': 0, 'F424': 0, 'F425': 0, 'F426': 0, 
        'F427': 0, 'F428': 0, 'F429': 0, 'F430': 0, 'F431': 0, 'F437': 0, 'F438': 0, 'F439': 0, 'F440': 0, 
        'F441': 0, 'F432': 0, 'F433': 0, 'F434': 0, 'F435': 0, 'F436': 0, 'F442': 0, 'F443': 0, 'F444': 0, 
        'F445': 0, 'F446': 0, 'F450': 0, 'F451': 0, 'F452': 0, 'F453': 0, 'F454': 0, 'F455': 0, 'F456': 0, 
        'F457': 0, 'F458': 0, 'F459': 0, 'F460': 0, 'F461': 0, 'RELX': 0, 'RELU': 0, 'RELT': 0, 'F449': 0, 
        'F448': 0, 'F447': 0
    },
    'PDC-RS': {
        'F400': 0, 'F401': 0, 'F402': 0, 'F403': 0, 'F404': 0, 'F405': 0, 'F411': 0, 'F410': 0, 'F409': 0, 
        'F408': 0, 'F407': 0, 'F406': 0, 'F412': 0, 'F413': 0, 'F414': 0, 'F415': 0, 'F416': 0, 'F417': 0, 
        'F420': 0, 'F419': 0, 'F418': 0, 'F421': 0, 'F422': 0, 'F423': 0, 'F424': 0, 'F425': 0, 'F426': 0, 
        'F427': 0, 'F428': 0, 'F429': 0, 'F430': 0, 'F431': 0, 'F437': 0, 'F438': 0, 'F439': 0, 'F440': 0, 
        'F441': 0, 'F432': 0, 'F433': 0, 'F434': 0, 'F435': 0, 'F436': 0, 'F442': 0, 'F443': 0, 'F444': 0, 
        'F445': 0, 'F446': 0, 'F450': 0, 'F451': 0, 'F452': 0, 'F453': 0, 'F454': 0, 'F455': 0, 'F456': 0, 
        'F457': 0, 'F458': 0, 'F459': 0, 'F460': 0, 'F461': 0, 'RELX': 0, 'RELU': 0, 'RELT': 0, 'F449': 0, 
        'F448': 0, 'F447': 0
    },
    'F96': {
        'F96': 0
    }, 
    'PDC-S': {
        '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0
    }, 
    'TBLU': {
        '9': 0, '8': 0, '7': 0, '6': 0, '5': 0, '4': 0, '3': 0, '2': 0, '1': 0
    },
    'PDC-E': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': 0,'F101': 0,'F102': 0,'F103': 0,'F104': 0,
        'F105': 0,'F106': 0,'F107': 0,'F108': 0,'F109': 0,'F110': 0,'F111': 0,'F112': 0,'F113': 0,'F114': 0,
        'F115': 0,'F116': 0,'F117': 0,'F118': 0,'F119': 0,'F120': 0,'F121': 0,'F122': 0,'F123': 0,'F124': 0,
        'F125': 0,'F126': 0,'F127': 0,'F128': 0,'F129': 0,'F130': 0,'F131': 0,'F132': 0,'F133': 0,'F134': 0,
        'F135': 0,'F136': 0,'F137': 0,'F138': 0,'F139': 0,'F140': 0,'F141': 0,'F142': 0,'RELN': 0,'RELR': 0
    },
    'PDC-E_AMG': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': 0,'F101': 0,'F102': 0,'F103': 0,'F104': 0,
        'F105': 0,'F106': 0,'F107': 0,'F108': 0,'F109': 0,'F110': 0,'F111': 0,'F112': 0,'F113': 0,'F114': 0,
        'F115': 0,'F116': 0,'F117': 0,'F118': 0,'F119': 0,'F120': 0,'F121': 0,'F122': 0,'F123': 0,'F124': 0,
        'F125': 0,'F126': 0,'F127': 0,'F128': 0,'F129': 0,'F130': 0,'F131': 0,'F132': 0,'F133': 0,'F134': 0,
        'F135': 0,'F136': 0,'F137': 0,'F138': 0,'F139': 0,'F140': 0,'F141': 0,'F142': 0,'F143': 0,'F144': 0,
        'F145': 0,'F146': 0,'F147': 0,'RELI': 0,'RELN': 0,'RELQ': 0,'RELR': 0
    },
    'PDC-S1': {
        'F200': 0, 'F201': 0, 'F202': 0, 'F203': 0, 'F204': 0, 'F205': 0, 'F206': 0, 'F207': 0, 'F208': 0, 
        'F209': 0,  'F210': 0,  'F211': 0, 'F212': 0, 'F213': 0, 'F214': 0, 'F215': 0, 'F216': 0, 'F217': 0, 
        'F218': 0, 'F219': 0, 'F220': 0, 'F221': 0, 'F222': 0, 'F223': 0, 'F224': 0, 'F225': 0, 'F226': 0, 
        'F227': 0, 'F228': 0, 'F229': 0, 'F230': 0, 'F231': 0, 'F232': 0
    }
}

var fuses_types = {
    'PDC-P': {
        'MF1': "MULTI", 'MF2': "MULTI", 'F300': "ATO", 'F301': "MINI", 'F302': "MINI", 'F303': "MINI", 'F304': "MINI", 'F305': "MINI", 'F318': "MINI", 
        'F319': "MINI", 'F320': "MINI", 'F321': "MINI", 'F322': "MINI", 'F323': "MINI", 'F324': "MINI", 'F325': "MINI", 'F326': "ATO", 'F327': "ATO", 
        'F328': "ATO", 'F329': "ATO", 'F330': "ATO", 'F331': "ATO", 'F332': "ATO", 'F333': "ATO", 'F334': "ATO", 'F335': "ATO", 'E21': "CONN", 
        'E22': "CONN"
    },
    'PDC-D': {
        'F200': "MINI", 'F201': "MINI", 'F202': "MINI", 'F203': "MINI", 'F204': "MINI", 'F205': "MINI", 'F206': "MINI", 'F207': "MINI", 'F208': "MINI", 
        'F209': "ATO", 'F210': "ATO", 'F211': "ATO", 'F212': "ATO", 'F213': "ATO", 'F214': "ATO", 'F215': "ATO", 'F216': "ATO", 'F217': "MINI", 
        'F218': "MINI", 'F219': "MINI", 'F220': "MINI", 'F221': "MINI", 'F222': "MINI", 'F223': "MINI", 'F224': "MINI", 'F225': "MINI", 'F226': "MINI", 
        'F227': "MINI", 'F228': "MINI", 'F229': "MINI", 'F230': "MINI", 'F231': "MINI", 'F232': "MINI"
    },
    'PDC-R': {
        'F400': "ATO", 'F401': "ATO", 'F402': "ATO", 'F403': "ATO", 'F404': "ATO", 'F405': "ATO", 'F411': "MINI", 'F410': "MINI", 'F409': "MINI", 
        'F408': "MINI", 'F407': "MINI", 'F406': "MINI", 'F412': "ATO", 'F413': "ATO", 'F414': "ATO", 'F415': "ATO", 'F416': "ATO", 'F417': "ATO", 
        'F420': "MAXI", 'F419': "MAXI", 'F418': "MAXI", 'F421': "ATO", 'F422': "ATO", 'F423': "ATO", 'F424': "ATO", 'F425': "ATO", 'F426': "ATO", 
        'F427': "MINI", 'F428': "MINI", 'F429': "MINI", 'F430': "MINI", 'F431': "MINI", 'F437': "MINI", 'F438': "MINI", 'F439': "MINI", 'F440': "MINI", 
        'F441': "MINI", 'F432': "MINI", 'F433': "MINI", 'F434': "MINI", 'F435': "MINI", 'F436': "MINI", 'F442': "MINI", 'F443': "MINI", 'F444': "MINI", 
        'F445': "MINI", 'F446': "MINI", 'F449': "MAXI", 'F448': "MAXI", 'F447': "MAXI", 'F450': "ATO", 'F451': "ATO", 'F452': "ATO", 'F453': "ATO", 
        'F454': "ATO", 'F455': "ATO", 'F456': "ATO", 'F457': "ATO", 'F458': "ATO", 'F459': "ATO", 'F460': "ATO", 'F461': "ATO", 'F462': "MAXI", 
        'F463': "MAXI", 'F464': "MAXI", 'F465': "MINI", 'F466': "MINI", 'F467': "MINI", 'F468': "MINI", 'F469': "MINI", 'F470': "MINI", 'F471': "ATO", 
        'F472': "ATO", 'F473': "ATO", 'F474': "ATO", 'F475': "ATO", 'F476': "ATO", 'F477': "ATO", 'F478': "ATO", 'F479': "ATO", 'F480': "ATO", 
        'F481': "ATO", 'F482': "ATO", 'RELX': "RELAY", 'RELU': "RELAY", 'RELT': "RELAY"
    },
    'PDC-RMID': {
        'F400': "ATO", 'F401': "ATO", 'F402': "ATO", 'F403': "ATO", 'F404': "ATO", 'F405': "ATO", 'F411': "MINI", 'F410': "MINI", 'F409': "MINI", 
        'F408': "MINI", 'F407': "MINI", 'F406': "MINI", 'F412': "ATO", 'F413': "ATO", 'F414': "ATO", 'F415': "ATO", 'F416': "ATO", 'F417': "ATO", 
        'F420': "MAXI", 'F419': "MAXI", 'F418': "MAXI", 'F421': "ATO", 'F422': "ATO", 'F423': "ATO", 'F424': "ATO", 'F425': "ATO", 'F426': "ATO", 
        'F427': "MINI", 'F428': "MINI", 'F429': "MINI", 'F430': "MINI", 'F431': "MINI", 'F437': "MINI", 'F438': "MINI", 'F439': "MINI", 'F440': "MINI", 
        'F441': "MINI", 'F432': "MINI", 'F433': "MINI", 'F434': "MINI", 'F435': "MINI", 'F436': "MINI", 'F442': "MINI", 'F443': "MINI", 'F444': "MINI", 
        'F445': "MINI", 'F446': "MINI", 'F450': "ATO", 'F451': "ATO", 'F452': "ATO", 'F453': "ATO", 'F454': "ATO", 'F455': "ATO", 'F456': "ATO", 
        'F457': "ATO", 'F458': "ATO", 'F459': "ATO", 'F460': "ATO", 'F461': "ATO", 'RELX': "RELAY", 'RELU': "RELAY", 'RELT': "RELAY", 'F449': "MAXI", 
        'F448': "MAXI", 'F447': "MAXI"
    },
    'PDC-RS': {
        'F400': "ATO", 'F401': "ATO", 'F402': "ATO", 'F403': "ATO", 'F404': "ATO", 'F405': "ATO", 'F411': "MINI", 'F410': "MINI", 'F409': "MINI", 
        'F408': "MINI", 'F407': "MINI", 'F406': "MINI", 'F412': "ATO", 'F413': "ATO", 'F414': "ATO", 'F415': "ATO", 'F416': "ATO", 'F417': "ATO", 
        'F420': "MAXI", 'F419': "MAXI", 'F418': "MAXI", 'F421': "ATO", 'F422': "ATO", 'F423': "ATO", 'F424': "ATO", 'F425': "ATO", 'F426': "ATO", 
        'F427': "MINI", 'F428': "MINI", 'F429': "MINI", 'F430': "MINI", 'F431': "MINI", 'F437': "MINI", 'F438': "MINI", 'F439': "MINI", 'F440': "MINI", 
        'F441': "MINI", 'F432': "MINI", 'F433': "MINI", 'F434': "MINI", 'F435': "MINI", 'F436': "MINI", 'F442': "MINI", 'F443': "MINI", 'F444': "MINI", 
        'F445': "MINI", 'F446': "MINI", 'F450': "ATO", 'F451': "ATO", 'F452': "ATO", 'F453': "ATO", 'F454': "ATO", 'F455': "ATO", 'F456': "ATO", 
        'F457': "ATO", 'F458': "ATO", 'F459': "ATO", 'F460': "ATO", 'F461': "ATO", 'RELX': "RELAY", 'RELU': "RELAY", 'RELT': "RELAY", 'F449': "MAXI", 
        'F448': "MAXI", 'F447': "MAXI"
    },
    'F96': {
        'F96': "ATO"
    }, 
    'PDC-S': {
        '1': "ATO", '2': "ATO", '3': "ATO", '4': "ATO", '5': "ATO", '6': "ATO"
    }, 
    'TBLU': {
        '9': "ATO", '8': "ATO", '7': "ATO", '6': "ATO", '5': "ATO", '4': "ATO", '3': "ATO", '2': "ATO", '1': "ATO"
    },
    'PDC-E': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': "ATO",'F101': "ATO",'F102': "ATO",'F103': "ATO",'F104': "ATO",
        'F105': "ATO",'F106': "ATO",'F107': "ATO",'F108': "ATO",'F109': "ATO",'F110': "ATO",'F111': "ATO",'F112': "ATO",'F113': "ATO",'F114': "ATO",
        'F115': "ATO",'F116': "ATO",'F117': "ATO",'F118': "MINI",'F119': "MINI",'F120': "MINI",'F121': "MINI",'F122': "MINI",'F123': "MINI",'F124': "MINI",
        'F125': "MINI",'F126': "MINI",'F127': "MINI",'F128': "MINI",'F129': "MINI",'F130': "MINI",'F131': "MINI",'F132': "MINI",'F133': "MINI",'F134': "MINI",
        'F135': "MINI",'F136': "MAXI",'F137': "MINI",'F138': "MINI",'F139': "MINI",'F140': "MINI",'F141': "MINI",'F142': "MINI",'RELN': "RELAY",'RELR': "RELAY"
    },
    'PDC-E_AMG': {
        /* 'A1-2': "CONN",'A1-3': "CONN",'A2-1': "CONN",'A2-2': "CONN",'A2-5': "CONN", */'F100': "ATO",'F101': "ATO",'F102': "ATO",'F103': "ATO",'F104': "ATO",
        'F105': "ATO",'F106': "ATO",'F107': "ATO",'F108': "ATO",'F109': "ATO",'F110': "ATO",'F111': "ATO",'F112': "ATO",'F113': "ATO",'F114': "ATO",
        'F115': "ATO",'F116': "ATO",'F117': "ATO",'F118': "MINI",'F119': "MINI",'F120': "MINI",'F121': "MINI",'F122': "MINI",'F123': "MINI",'F124': "MINI",
        'F125': "MINI",'F126': "MINI",'F127': "MINI",'F128': "MINI",'F129': "MINI",'F130': "MINI",'F131': "MINI",'F132': "MINI",'F133': "MINI",'F134': "MINI",
        'F135': "MINI",'F136': "MAXI",'F137': "MINI",'F138': "MINI",'F139': "MINI",'F140': "MINI",'F141': "MINI",'F142': "MINI",'F143': "ATO",'F144': "ATO",
        'F145': "ATO",'F146': "MAXI",'F147': "ATO",'RELI': "RELAY",'RELN': "RELAY",'RELQ': "RELAY",'RELR': "RELAY"
    },
    'PDC-S1': {
        'F200': "MINI", 'F201': "MINI", 'F202': "MINI", 'F203': "MINI", 'F204': "MINI", 'F205': "MINI", 'F206': "MINI", 'F207': "MINI", 'F208': "MINI", 
        'F209': "ATO",  'F210': "ATO",  'F211': "ATO", 'F212': "ATO", 'F213': "ATO", 'F214': "ATO", 'F215': "ATO", 'F216': "ATO", 'F217': "MINI", 
        'F218': "MINI", 'F219': "MINI", 'F220': "MINI", 'F221': "MINI", 'F222': "MINI", 'F223': "MINI", 'F224': "MINI", 'F225': "MINI", 'F226': "MINI", 
        'F227': "MINI", 'F228': "MINI", 'F229': "MINI", 'F230': "MINI", 'F231': "MINI", 'F232': "MINI"
    }

}



class Change {
    constructor(caja, variante, mayusVariante, mayusCaja){
        this.caja = caja;
        this.variante = variante;
        this.mayusVariante = mayusVariante;
        this.mayusCaja = mayusCaja;
    }

      agregarVariante(newVariante){
        if (newVariante === "null") {
          console.warn("No hay variante de Caja");
          return;
      }

      const v = newVariante.split(',');

      if (v.length !== 2) {
          console.error("Formato de variante incorrecto");
          return;
      }
      this.mayusVariante = v[0];
      this.variante = v[1];
      
       if (!box_array[this.mayusVariante]){
         box_array[this.mayusVariante] = [];
       }

      
        //console.log('BOX ARRAY ANTERIOR', box_array);
        // console.log('BOX ARRAY ANTERIOR', box_array[v[0]]);          
        console.log('Agregando ', this.mayusVariante);
        fuses_value[this.mayusVariante] = {...fuses_value[this.mayusCaja]};

        // //box_array[v[0]] = box_array[this.mayusVariante];
        // console.log('Nuevo BOX_ARRAY', box_array);
        // console.log('Nuevo fuses_value', fuses_value);
        // // Eliminar la antigua clave
        // console.log(box_array);       
      


      //const imgElement = document.getElementById(`${this.caja}_image_v`);
      //const canvas = document.getElementById(`${this.caja}_image_v_canvas`);
      
      // if (imgElement && canvas) {
      //     imgElement.src = `static/content/cajas/interior/${this.caja}/${this.variante}.jpg`;
      //     const ctx = canvas.getContext("2d");
      //     const image = new Image();
      //     image.src = `static/content/cajas/interior/${this.caja}/${this.variante}.jpg`;
      //     image.onload = () => {
      //         console.log("IMAGEN", image);
      //         ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear previous image
      //         ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      //         //cargar_imagen(this);
      //       };
      // } else {
      //     console.error("Elementos de imagen o canvas no encontrados");
      // }
      }
  
       cambiarVariante(newVariante) {
        if (newVariante === "null") {
            console.warn("No hay variante de Caja");
            return;
        }
  
        const v = newVariante.split(',');
  
        if (v.length !== 2) {
            console.error("Formato de variante incorrecto");
            return;
        }

        if (!box_array[this.mayusVariante]){
          box_array[this.mayusVariante] = [];
        }
  
        if (v[0] !== this.mayusVariante) {
          console.log('BOX ARRAY ANTERIOR', box_array);
          console.log('BOX ARRAY ANTERIOR', box_array[v[0]]);          
          console.log('CAMBIANDO ', this.mayusVariante, ' a ', v[0] );


          box_array[v[0]] = box_array[this.mayusVariante];
          console.log('Nuevo BOX_ARRAY', box_array);
          // Eliminar la antigua clave
          delete box_array[this.mayusVariante];
          console.log(box_array);       
        }

          this.mayusVariante = v[0];
          this.variante = v[1];
  
        const imgElement = document.getElementById(`${this.caja}_image_v`);
        const canvas = document.getElementById(`${this.caja}_image_v_canvas`);
        
        if (imgElement && canvas) {
            imgElement.src = `static/content/cajas/interior/${this.caja}/${this.variante}.jpg`;
            const ctx = canvas.getContext("2d");
            const image = new Image();
            image.src = `static/content/cajas/interior/${this.caja}/${this.variante}.jpg`;
            image.onload = () => {
                console.log("IMAGEN", image);
                ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear previous image
                ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                cargar_imagen(this);
              };
        } else {
            console.error("Elementos de imagen o canvas no encontrados");
        }
    }
    mostrarPropiedades() {
      console.log(`La caja: ${this.caja}, variante: ${this.variante}, mayusVariante: ${this.mayusVariante}`);
    }
    getVariante() {
      return this.variante;
    }
    getMayusVariante() {
      return this.mayusVariante;
    }
    getCaja() {
      return this.caja;
    }
    getMayusCaja() {
      return this.mayusCaja;
    }  
  }
  
  const changePDCS = new Change('pdcs', 'pdcs', 'PDC-S', 'PDC-S');
  const changeF96 = new Change('f96', 'f96', 'F96', 'F96');
  
  box_array[`${changeF96.getMayusCaja()}`]= []
  box_array[`${changePDCS.getMayusCaja()}`]= []


  function cargar_imagen(change) {
    const variante = change.getVariante();
    const mayusVariante = change.getMayusVariante();
    const actualCaja = change.getCaja();
    const mayusCaja = change.getMayusCaja();
    let img_caja = document.getElementById(`${variante}_image_v_canvas`);
    var t1 = new ToolTip(img_caja, "This is a tool-tip", 150, change);
      if (img_caja.getContext) {
          var ctx = img_caja.getContext("2d");
          var img = new Image();
          img.src = `static/content/cajas/interior/${actualCaja}/${variante}.jpg`;
          img.onload = function () {
              imgWidth = this.width;
              imgHeight = this.height;
              img_caja.width = imgWidth;
              img_caja.height = imgHeight;
              // console.log("imgWidth: ",imgWidth);
              // console.log("imgHeight: ",imgHeight);
              // console.log("img_caja.width: ",img_caja.width);
              // console.log("img_caja.height: ",img_caja.height);
              ctx.drawImage(this, 0, 0, imgWidth, imgHeight);
              var datosimagen = ctx.getImageData(0, 0, imgWidth, imgHeight);
              // console.log("datos imagen: ",datosimagen)
              datosPrim_pdcs = datosimagen.data;
              ctx.fillStyle = "#0F53F1";
              ctx.lineWidth = "3";
              // console.log("La Caja a pintar es la siguiente: PDC-RMID");
              pintar()
  
              function pintar() {
                  // console.log("MI ARRAY PDC-RMID: ",box_array[mayusVariante])
                  for (let i = 0; i < box_array[mayusVariante].length; i++) {
                      let fusibleColocado;
                      var image = new Image();
                      let cavidad = box_array[mayusVariante][i];
                      //console.log("CAVIDAD : ", cavidad);
                      //console.log(modularity);
                      //console.log(mayusCaja);
                      
                      fusibleColocado = modularity[mayusVariante][box_array[mayusVariante][i]][0];
  
                      let cavidadx = fuses_BB[mayusCaja][cavidad][0][0];
                      let cavidady = fuses_BB[mayusCaja][cavidad][0][1];
                      let cavidadw = fuses_BB[mayusCaja][cavidad][1][0];
                      let cavidadh = fuses_BB[mayusCaja][cavidad][1][1];
                      let cavidad_ctgry = fuses_types[mayusCaja][cavidad];
                      fuses_value[mayusVariante][cavidad] = modularity[mayusVariante][cavidad][0]? modularity[mayusVariante][cavidad][0]: 'vacio';

                      // console.log(cavidadx)
                      // console.log(cavidady)
                      // console.log(cavidadw)
                      // console.log(cavidadh)
                      //console.log(cavidad_ctgry)
                      switch (cavidad_ctgry) {
                          case 'ATO':
                              conteo_b_ATO++;
                              break;
                          default:
                              console.log('ALERTA FUSIBLE NO CONTADO', cavidad_ctgry)
                              break;
                      }
                      getDistance(cavidadx, cavidady, cavidadw, cavidadh);
                      // console.log("PDC-RMID DISTANCE X",xDistance)
                      // console.log("PDC-RMID DISTANCE Y",yDistance)
                      let orientacion = xDistance > yDistance ? "h" : "v";
                      //console.log(color_style);
                      //console.log(fusibleColocado);
                      //color_style = "#ffffff00"
                      color_style = "#ffffff00";
                      amperaje = '';
                      image.src = `static/content/cajas/interior/fusibles/${fusibleColocado}${orientacion}.jpg`;
  
                      arrayFuses_b.push(`${fusibleColocado}`)
  
                      ctx.beginPath();
                      ctx.strokeStyle = color_style;
                      ctx.strokeRect(cavidadx, cavidady, xDistance, yDistance);
                      //console.log(`static/content/fusibles/${cavidad_ctgry},${amperaje},${fusibleColocado}${orientacion}.jpg`)
                      cargar_cavidad(
                          cavidad_ctgry,
                          amperaje,
                          fusibleColocado,
                          orientacion,
                          image,
                          ctx,
                          cavidadx,
                          cavidady,
                          cavidadw,
                          cavidadh
                      );
                  }
              }
          };
      }
  }
  
  
  
  
  //  PDCS ToolTip


  function ToolTip(img, text, width, change) {
  //console.log(change);
    const variante = change.getVariante();
    const mayusVariante = change.getMayusVariante();
    const actualCaja = change.getCaja();
    const mayusCaja = change.getMayusCaja();
  
  
    var me = this, // self-reference for event handlers
      div = document.createElement("div"), // the tool-tip div
      
      parent = img.parentNode, // parent node for img
      visible = false; // current status
      div.id ='tooltip'
    // show the tool-tip
    this.show = function (pos) {
      if (!visible) { // ignore if already shown (or reset time)
        visible = true; // lock so it's only shown once
        setDivPos(pos); // set position
        if (!document.getElementById('tooltip')) {
          
          parent.appendChild(div); // add to parent of img
        }
      }
    }
    // hide the tool-tip
    function hide() {
      visible = false; // hide it after timeout
      if (parent.contains(div)) {
        parent.removeChild(div); // remove from DOM
      }
    }
  
    let keys_cavidad = Object.keys(fuses_BB[mayusCaja]);
    // console.log("KEYS DE PDCS: ",keys_cavidad);
    let cavidad, amperaje;
    // check mouse position, add limits as wanted... just for example:
    function check(e) {
      if (parent.contains(div)) {
        hide();
      }
      var pos = getPos(e),
        posAbs = {
          x: e.clientX,
          y: e.clientY
        }; // div is fixed, so use clientX/Y
      for (i = 1; i < keys_cavidad.length + 1; i++) {
        let fusible_tooltip;
        cavidad = keys_cavidad[i - 1];
        
        //console.log(fuses_BB[mayusCaja][cavidad]);
        if (!visible && pos.x >= fuses_BB[mayusCaja][cavidad][0][0] && pos.x <= fuses_BB[mayusCaja][cavidad][1][0] && pos.y >= fuses_BB[mayusCaja][cavidad][0][1] && pos.y <= fuses_BB[mayusCaja][cavidad][1][1]) {
          //console.log(fuse_inserted);          // set some initial styles, can be replaced by class-name etc.
          div.style.cssText = "position:fixed;padding:7px;font-weight: bold;color:#000;background:rgba(51, 255, 252, 0.6);pointer-events:none;width:" + width + "px";
          //var fuse_inserted = modularity["vision"][mayusVariante][box_array[mayusVariante][i-1]]
          if (fuses_value[mayusCaja][cavidad] == "vacio" && fuse_inserted === "vacio") {
            fusible_tooltip = "Vacío";
          } 
          else {
            //fusible_tooltip = fuses_value[mayusCaja][cavidad];
            fusible_tooltip = fuses_value[mayusVariante][cavidad];
          
           }
          
                  

          let unidad = amperaje === 'N/A' ? 'N/A' : amperaje + ' Amps';
          var fuse_inserted = modularity[mayusVariante][cavidad];
          div.innerHTML = fuse_inserted? `Cavidad: ${cavidad}<br>Fusible:<br> ${fusible_tooltip}<br>Modulo: ${fuse_inserted[1]}` : `Cavidad: ${cavidad}<br>Fusible: ${fusible_tooltip}`;
          me.show(posAbs); // show tool-tip at this pos
        } else setDivPos(posAbs);
      } // otherwise, update position
    }
    // get mouse position relative to img
    function getPos(e) {
      var r = img.getBoundingClientRect();
      return {
        x: e.clientX - r.left,
        y: e.clientY - r.top
      }
    }
    // update and adjust div position if needed (anchor to a different corner etc.)
    function setDivPos(pos) {
      if (visible) {
        if (pos.x < 0) pos.x = 0;
        if (pos.y < 0) pos.y = 0;
        // other bound checks here
        div.style.left = pos.x + "px";
        div.style.top = pos.y + "px";
      }
    }
    // we need to use shared event handlers:
    img.addEventListener("mousemove", check);
    img.addEventListener("click", check);
    $(document).on('wheel', function () {
      hide();
    });
  }